





<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quizify</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" type="image/png" href="img.png">
</head>
<body>
    <!-- NEW: Audio element for chat notifications -->
    <audio id="chat-notification-sound" src="https://cdn.pixabay.com/download/audio/2021/08/04/audio_bb63024098.mp3" preload="auto"></audio>

    <!-- Notification Toast -->
    <div id="notification-toast" class="notification-toast">
        <div id="toast-spinner" class="toast-spinner" style="display: none;">
            <div class="spinner"></div>
        </div>
        <div id="toast-icon-container"></div>
        <p id="toast-message" class="toast-message"></p>
        <button id="toast-info-btn" class="toast-info-btn" title="Show details" style="display: none;">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
        </button>
    </div>

    <!-- Onboarding Modal -->
    <div id="onboarding-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Welcome to Quizify!</h2>
            <p>Let's personalize your experience. What should we call you?</p>
            <input type="text" id="user-name-input" placeholder="Enter your name">
            <p>Enter a unique 4-digit PIN to save and retrieve your progress.</p>
            <input type="number" id="user-pin-input" placeholder="Enter a 4-digit PIN" maxlength="4" oninput="this.value=this.value.slice(0,4)">
            <p>What are you preparing for?</p>
            <div class="onboarding-choices">
                <button>Competitive Exams</button>
                <button>Academics</button>
            </div>
        </div>
    </div>

        <!-- NEW: Sample Paper Viewer Modal -->
        <div id="sample-paper-modal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Sample Papers</h2>
                    <button id="close-sample-paper-modal-btn" class="modal-close-btn" title="Close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="sample-paper-list">
                        <!-- Sample paper items injected by JS -->
                    </div>
                    <div id="sample-paper-preview" style="margin-top:12px;"></div>
                </div>
                <div class="modal-actions">
                    <button id="open-sample-paper-new-tab-btn" class="btn btn--primary" style="display:none;">Open in new tab</button>
                </div>
            </div>
        </div>

    <!-- NEW: PIN Reminder Modal -->
    <div id="pin-reminder-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Remember Your PIN!</h2>
            <p>Your progress is saved with your Name and PIN. Please remember your PIN to access your progress later.</p>
            <p>Your PIN: <strong id="reminder-pin-display"></strong></p>
            <div class="modal-actions">
                <button id="close-pin-reminder-btn">I Understand</button>
            </div>
        </div>
    </div>


    <!-- Logout Confirmation Modal -->
    <div id="logout-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Confirm Logout</h2>
            <p>Are you sure you want to logout? This will clear your session and allow you to change your preparation focus.</p>
            <div class="modal-actions">
                <button id="cancel-logout-btn" class="btn--secondary">Cancel</button>
                <button id="confirm-logout-btn">Logout</button>
            </div>
        </div>
    </div>

    <!-- NEW: Generic Spinner Modal (for account updates, data syncing, etc.) -->
    <div id="spinner-modal" class="modal-overlay">
        <div class="modal-content">
            <div id="spinner-modal-spinner-container" class="spinner-container" style="padding: 20px 0;">
                <div class="spinner"></div>
            </div>
            <div id="spinner-modal-success-container" style="display: none;"></div>
            <h2 id="spinner-modal-title">Updating Account...</h2>
            <p id="spinner-modal-message">Please wait while we migrate your data. This may take a moment.</p>
        </div>
    </div>

    <!-- NEW: Edit Account Confirmation Modal -->
    <div id="edit-account-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Edit Account Details</h2>
            <p>You are about to edit your login details. Changing your name or PIN will require you to use the new credentials to log in next time. Are you sure you want to proceed?</p>
            <div class="modal-actions">
                <button id="cancel-edit-account-btn" class="btn--secondary">Cancel</button>
                <button id="proceed-edit-account-btn">Yes, Proceed</button>
            </div>
        </div>
    </div>

    <!-- NEW: Delete Account - Step 1 & 3: Confirmation Modals -->
    <div id="delete-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="delete-confirm-title">Delete Account</h2>
            <p id="delete-confirm-message">This is a permanent action. Are you sure you want to proceed?</p>
            <div class="modal-actions">
                <button id="cancel-delete-btn" class="btn--secondary">Cancel</button>
                <button id="confirm-delete-btn" class="btn--danger">Proceed</button>
            </div>
        </div>
    </div>

    <!-- NEW: Delete Account - Step 2: Credential Verification -->
    <div id="delete-credential-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Verify Your Identity</h2>
            <p>To continue, please enter your name and PIN to confirm you own this account.</p>
            <input type="text" id="delete-account-name-input" class="form-control" placeholder="Enter your name" style="margin-bottom: 1rem;">
            <input type="number" id="delete-account-pin-input" class="form-control" placeholder="Enter your 4-digit PIN" maxlength="4" oninput="this.value=this.value.slice(0,4)">
            <div class="modal-actions">
                <button id="cancel-credential-btn" class="btn--secondary">Cancel</button>
                <button id="confirm-credential-btn">Verify & Proceed</button>
            </div>
        </div>
    </div>

    <!-- Locked Content Modal -->
    <div id="locked-content-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Coming Soon!</h2>
            <p>This content is currently under development. We're working hard to bring you new quizzes and topics. Please check back later!</p>
            <div class="modal-actions">
                <button id="close-locked-modal-btn">Got it</button>
            </div>
        </div>
    </div>

    <!-- Update Details Modal -->
    <div id="update-details-modal" class="modal-overlay">
        <div class="modal-content update-modal-content">
            <div class="modal-header">
                <h2 id="update-details-title">Update Details</h2>
                <button id="close-update-details-btn" class="modal-close-btn" title="Close">&times;</button>
            </div>
            <div id="update-details-content" class="update-details-content">
            </div>
        </div>
    </div>

    <!-- NEW: Quiz Mode Selection Modal -->
    <div id="quiz-mode-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Choose Your Mode</h2>
                <button id="close-quiz-mode-btn" class="modal-close-btn" title="Close">&times;</button>
            </div>
            <p>How would you like to attempt this quiz set? </p>
            <div class="quiz-mode-choices">
                <button id="start-timed-quiz-btn">
                    <strong>Timed Quiz</strong><span>(Standard mode with timer and results at the end)</span></button>
                <button id="start-practice-quiz-btn">
                    <strong>Practice Mode</strong><span>(No timer, instant feedback after each question)</span></button>
            </div>
        </div>
    </div>

    <!-- NEW: Quiz Instructions Modal (shown after choosing mode) -->
    <div id="quiz-instructions-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="quiz-instructions-title">Quiz Instructions</h2>
                <button id="close-quiz-instructions-btn" class="modal-close-btn" title="Close">&times;</button>
            </div>
            <div class="modal-body" id="quiz-instructions-body">
                <!-- Populated dynamically: subject, chapter, set, questions, estimated time, rules -->
                <p id="quiz-instructions-summary"></p>
                <ul id="quiz-instructions-rules">
                    <li>Each correct answer awards <strong>2 marks</strong>.</li>
                    <li>Wrong answers award <strong>0 marks</strong> (no negative marking in regular quizzes).</li>
                    <li>Unanswered questions are not penalized.</li>
                    <li>Use lifelines from the toolbar if available.</li>
                    <li><em>Note:</em> Negative marking (−0.5 for incorrect answers) applies only to <strong>Mock Tests</strong>.</li>
                </ul>
            </div>
            <div class="modal-actions">
                <button id="cancel-quiz-instructions-btn" class="btn--secondary">Cancel</button>
                <button id="start-quiz-from-instructions-btn" class="btn btn--primary">Start Quiz</button>
            </div>
        </div>
    </div>

    <!-- NEW: Retake Passed Quiz Confirmation Modal -->
    <div id="retake-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2>Retake Passed Quiz?</h2>
            <p>You have already passed this quiz set. Retaking it will not affect your chapter progress. Do you still want to proceed?</p>
            <div class="modal-actions">
                <button id="cancel-retake-btn" class="btn--secondary">Cancel</button>
                <button id="confirm-retake-btn">Yes, Retake</button>
            </div>
        </div>
    </div>

    <!-- NEW: Feature Coming Soon Modal -->
    <div id="feature-coming-soon-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="feature-coming-soon-title">Feature Coming Soon!</h2>
                <button id="close-feature-coming-soon-btn" class="modal-close-btn" title="Close">&times;</button>
            </div>
            <p id="feature-coming-soon-message">This feature is currently under development and not yet available. Please check back later!</p>
        </div>
    </div>


    <!-- NEW: Generic Info/Festive Wish Modal -->
    <div id="info-modal" class="modal-overlay">
        <div class="modal-content info-modal-content">
            <!-- NEW: Sparkle Animation Container -->
            <div class="sparkle-fall-container">
                <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
            </div>
            <button id="close-info-modal-btn" class="modal-close-btn" title="Close">&times;</button>
            <div class="info-icon"></div>
            <h2 id="info-modal-title"></h2>
            <p id="info-modal-message"></p>
            <p id="info-modal-subtext" class="info-subtext"></p>
        </div>
    </div>

    <!-- NEW: Achievement Unlocked Modal -->
    <div id="achievement-unlocked-modal" class="modal-overlay">
        <div class="modal-content achievement-modal-content">
            <div class="sparkle-fall-container">
                <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
            </div>
            <div id="achievement-icon" class="achievement-icon"></div>
            <h2>Achievement Unlocked!</h2>
            <p id="achievement-name" class="achievement-name"></p>
            <p id="achievement-description" class="achievement-description"></p>
            <button id="close-achievement-modal-btn" class="btn btn--primary">Awesome!</button>
        </div>
    </div>

    <!-- NEW: Daily Coin Reward Modal -->
    <div id="daily-coin-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="modal-header">
                <h2>Daily Reward!</h2>
                <button id="close-daily-coin-btn" class="modal-close-btn" title="Close">&times;</button>
            </div>
            <p>Your daily reward of <strong>2 Quiz Coins</strong> is ready to be collected!</p>
            <div class="daily-coin-reward-icon">💰💰</div>
            <div class="modal-actions">
                <button id="collect-daily-coin-btn" class="btn btn--primary">Collect Coins</button>
            </div>
        </div>
    </div>

    <!-- NEW: Store Purchase Confirmation Modal -->
    <div id="store-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="store-confirm-title">Confirm Purchase</h2>
            <div id="store-confirm-item-details" class="store-confirm-item-details">
                <!-- Item icon, name, description will be populated here by JS -->
            </div>
            <p>Are you sure you want to purchase this item?</p>
            <div id="store-confirm-balance-info" class="store-confirm-balance-info">
                <p>Cost: <span class="coin-icon">💰</span><strong id="store-confirm-item-cost">0</strong></p>
                <p>Your current balance: <span class="coin-icon">💰</span><span id="store-confirm-current-balance"></span></p>
                <p>Balance after purchase: <span class="coin-icon">💰</span><span id="store-confirm-new-balance"></span></p>
            </div>
            <div class="modal-actions">
                <button id="cancel-purchase-btn" class="btn btn--secondary">Cancel</button>
                <button id="confirm-purchase-btn" class="btn btn--primary">Confirm Purchase</button>
            </div>
        </div>
    </div>

    <!-- NEW: Purchase Success Modal -->
    <div id="purchase-success-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="success-checkmark-container">
                <svg class="success-checkmark" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 52 52">
                    <circle class="checkmark-circle" cx="26" cy="26" r="25" fill="none"/>
                    <path class="checkmark-check" fill="none" d="M14.1 27.2l7.1 7.2 16.7-16.8"/>
                </svg>
            </div>
            <h2 id="purchase-success-title">Purchase Successful!</h2>
            <p id="purchase-success-message">You have successfully purchased the item.</p>
            <div class="modal-actions">
                <button id="close-purchase-success-btn" class="btn btn--primary">Continue Shopping</button>
            </div>
        </div>
    </div>

    <!-- NEW: Store Updates Modal -->
    <div id="store-updates-modal" class="modal-overlay">
        <div class="modal-content info-modal-content">
            <div class="sparkle-fall-container">
                <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
            </div>
            <button id="close-store-updates-btn" class="modal-close-btn" title="Close">&times;</button>
            <div class="info-icon">🛍️</div>
            <h2 id="store-updates-title">Store Updates!</h2>
            <p id="store-updates-message">Check out the latest deals and newest items available now!</p>
            <div id="store-updates-content" class="store-updates-content">
                <!-- Deals and new items will be populated here by JS -->
            </div>
            <div class="modal-actions">
                <button id="later-store-updates-btn" class="btn btn--secondary">Maybe Later</button>
                <button id="go-to-store-updates-btn" class="btn btn--primary">Go to Store</button>
            </div>
        </div>
    </div>

    <!-- NEW: Sell Confirmation Modal -->
    <div id="store-sell-confirm-modal" class="modal-overlay">
        <div class="modal-content">
            <h2 id="store-sell-title">Confirm Sale</h2>
            <div id="store-sell-item-details" class="store-confirm-item-details">
                <!-- Item details will be populated here -->
            </div>
            <p>Are you sure you want to sell this item? You will receive 30% of its original cost back.</p>
            <div id="store-sell-balance-info" class="store-confirm-balance-info">
                <p>Original Cost: <span class="coin-icon">💰</span><strong id="store-sell-item-cost">0</strong></p>
                <p>Refund Amount: <span class="coin-icon">💰</span><strong id="store-sell-refund-amount">0</strong></p>
                <p>Balance after sale: <span class="coin-icon">💰</span><span id="store-sell-new-balance"></span></p>
            </div>
            <div class="modal-actions">
                <button id="cancel-sell-btn" class="btn--secondary">Cancel</button>
                <button id="confirm-sell-btn" class="btn--danger">Confirm Sale</button>
            </div>
        </div>
    </div>

    <!-- NEW: Global Chat Modal -->
    <div id="global-chat-modal" class="chat-modal">
        <div class="modal-header chat-header">
            <div>
                <h2>Global Chat</h2>
                <span id="online-user-count"></span>
            </div>
            <!-- NEW: Back button for in-chat profile view -->
            <button id="back-to-chat-btn" class="modal-close-btn" title="Back to Chat" style="display: none;">←</button>
            <button id="close-chat-modal-btn" class="modal-close-btn" title="Close">&times;</button>
        </div>

        <!-- NEW: In-Chat User Profile View -->
        <div id="in-chat-profile-view" class="modal-body" style="display: none;">
            <div class="chat-profile-content-wrapper">
                <h3 id="in-chat-profile-name">User Profile</h3>
                <div id="in-chat-profile-content">
                    <!-- Profile details will be loaded here by chat.js -->
                </div>
            </div>
        </div>

        <!-- Main Chat View -->
        <div id="chat-messages-wrapper" class="modal-body chat-messages-wrapper">
            <div id="chat-messages" class="chat-messages">
                <!-- Messages will be populated here -->
            </div>
            <div id="typing-indicator-container"></div>
        </div>

        <div id="chat-input-container" class="chat-input-container">
            <div id="reply-indicator" class="reply-indicator" style="display: none;"></div>
            <input type="text" id="chat-message-input" placeholder="Type a message..." maxlength="250">
            <span id="char-counter">250</span>
            <button id="send-chat-message-btn" class="btn--icon" title="Send">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button>
        </div>
    </div>

    <!-- NEW: Emoji Picker Popover for Chat -->
    <div id="emoji-picker" class="emoji-picker">
        <div class="emoji-picker-content">
            <!-- Emojis will be populated here -->
        </div>
    </div>

    <!-- NEW: Help Bot Modal -->
    <div id="help-bot-modal" class="chat-modal">
        <div class="modal-header chat-header">
            <h2>Quizify Help Bot 🤖</h2>
            <button id="close-bot-modal-btn" class="modal-close-btn" title="Close">&times;</button>
        </div>
        <div id="bot-chat-messages" class="chat-messages">
            <!-- Bot conversation will be populated here -->
        </div>
        <div class="chat-input-container">
            <input type="text" id="bot-message-input" placeholder="Type your question...">
            <button id="send-bot-message-btn" class="btn--icon" title="Send">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="22" y1="2" x2="11" y2="13"></line><polygon points="22 2 15 22 11 13 2 9 22 2"></polygon></svg>
            </button> 
        </div>
    </div>

    <div class="container">
        <!-- Page-level Background Animation -->
        <div class="leaves-container">
            <i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i><i></i>
            <i></i><i></i><i></i><i></i>
        </div>

        <!-- NEW: Floating Action Buttons (FABs) for Chat and Bot -->
        <div class="fab-container">
            <button id="open-help-bot-fab" class="fab help-fab" title="Help Bot">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path><line x1="12" y1="17" x2="12.01" y2="17"></line></svg>
            </button>
            <button id="open-chat-fab" class="fab" title="Global Chat">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"></path></svg>
            </button>
        </div>


        <header class="app-header">
            <!-- Hamburger Menu Button -->
            <button id="menu-toggle-btn" class="menu-toggle-btn" aria-label="Open menu">
                <span id="menu-notification-dot" class="notification-dot" style="display: none;"></span>
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                    <line x1="3" y1="6" x2="21" y2="6"></line>
                    <line x1="3" y1="12" x2="21" y2="12"></line>
                    <line x1="3" y1="18" x2="21" y2="18"></line>
                </svg>
            </button>
        </header>

        <!-- Side Menu (Drawer) -->
        <div id="side-menu" class="side-menu">
            <div class="side-menu-header">
                <h3>Settings</h3>
                <button id="close-menu-btn" class="close-btn" aria-label="Close menu">&times;</button>
            </div>
            <div class="side-menu-content">
                <div class="side-menu-group">
                    <button id="menu-home-btn" class="side-menu-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path><polyline points="9 22 9 12 15 12 15 22"></polyline></svg>
                        <span>Home</span>
                    </button>
                    <button id="menu-profile-btn" class="side-menu-item">
                        <span id="profile-notification-dot" class="notification-dot side-menu-dot" style="display: none;"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                        <span>My Profile</span>
                    </button>
                    <button id="menu-leaderboard-btn" class="side-menu-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="M12 10l-4 4 2 2 6-6-2-2-2 2z"></path></svg>
                        <span>Leaderboard</span>
                    </button>
                    <button id="menu-store-btn" class="side-menu-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M6 2L3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4z"></path><line x1="3" y1="6" x2="21" y2="6"></line><path d="M16 10a4 4 0 0 1-8 0"></path></svg>
                        <span>Store</span>
                    </button>
                    <button id="menu-videos-btn" class="side-menu-item">
                        <span id="videos-notification-dot" class="notification-dot side-menu-dot" style="display: none;"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="23 7 16 12 23 17 23 7"></polygon><rect x="1" y="5" width="15" height="14" rx="2" ry="2"></rect></svg>
                        <span>Videos</span>
                    </button>
                </div>
                <div class="side-menu-group">
                    <h4 class="side-menu-group-title">Progress</h4>
                    <button id="menu-achievements-btn" class="side-menu-item">
                        <span id="achievements-notification-dot" class="notification-dot side-menu-dot" style="display: none;"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"></path><path d="m9 12 2 2 4-4"></path></svg>
                        <span>Achievements</span>
                    </button>
                    <button id="menu-bookmarks-btn" class="side-menu-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
                        <span>Bookmarks</span>
                    </button>
                    <button id="menu-community-btn" class="side-menu-item">
                        <span id="community-notification-dot" class="notification-dot side-menu-dot" style="display: none;"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"></path><circle cx="9" cy="7" r="4"></circle><path d="M23 21v-2a4 4 0 0 0-3-3.87"></path><path d="M16 3.13a4 4 0 0 1 0 7.75"></path></svg>
                        <span>Community</span>
                    </button>
                </div>
                <div class="side-menu-group">
                    <h4 class="side-menu-group-title">App</h4>
                    <button id="menu-settings-btn" class="side-menu-item">
                        <span id="settings-notification-dot" class="notification-dot side-menu-dot" style="display: none;"></span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg>
                        <span>Settings</span>
                    </button>
                    <button id="menu-about-us-btn" class="side-menu-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><line x1="12" y1="16" x2="12" y2="12"></line><line x1="12" y1="8" x2="12.01" y2="8"></line></svg>
                        <span>About Us</span>
                    </button>
                    <a href="mailto:productionrtf@gmail.com?subject=Feedback for Quizify App" class="side-menu-item">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"></path><polyline points="22,6 12,13 2,6"></polyline></svg>
                        <span>Feedback</span>
                    </a>
                </div>
            </div>
            <div class="side-menu-bottom">
                <button id="logout-btn" class="side-menu-logout-btn">Logout</button>
                <div class="side-menu-footer">
                    <p>Quizify <span id="menu-app-version"></span></p>
                </div>
                <!-- NEW: Quiz Coins Display -->
                <div class="quiz-coins-display">
                    <span class="coin-icon">💰</span>
                    <span id="quiz-coins-balance">0</span>
                </div>
            </div>
        </div>
        <div id="menu-overlay" class="menu-overlay"></div>

        <!-- Home Page -->
        <div id="home-page" class="page active">
            <div class="home-header">
                <!-- <div class="header-logo" onclick="goToHome()">
                    <img src="img.png" alt="Quiz Logo">
                    <span>Quizify</span> 
                </div> -->
                <!-- NEW: Sparkle container for the welcome message -->
                <div id="welcome-sparkles"></div>
                <h1 id="welcome-heading">Welcome, <span id="user-name-display"></span>!</h1>
                <!-- NEW: Streak Counter -->
                <div id="streak-counter" class="streak-counter" style="display: none;">
                    <span class="streak-icon">🔥</span>
                    <span id="streak-value">0</span>-day streak!
                </div>
            </div>

            <!-- Homepage Search Bar -->
            <div class="homepage-search-container">
                <input type="text" id="homepage-search-input" placeholder="Search for any chapter...">
                <div id="homepage-search-results" class="homepage-search-results"></div>
            </div>

            <!-- Daily Challenge Section -->
            <div id="daily-challenge-section">
                <div class="daily-challenge-card">
                    <div id="daily-challenge-notification-dot" class="notification-dot" style="display: none;"></div>
                    <div class="rain-container">
                        <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
                        <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
                        <i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>
                    </div>
                    <h2>🔥 Daily Challenge</h2>
                    <p id="daily-challenge-date" class="daily-challenge-date-text"></p>
                    <p>Test your knowledge with 20 random questions from all subjects. A new quiz is available every day!</p>
                    <span id="daily-challenge-status"></span>
                    <div class="daily-challenge-cta">
                        <span>Start Challenge</span>
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="12 5 19 12 12 19"></polyline><line x1="19" y1="12" x2="5" y2="12"></line></svg>
                    </div>
                </div>
            </div>

            <!-- NEW: Personal Best Score Section -->
            <div id="personal-best-section" class="personal-best-card" style="display: none;">
                <div class="personal-best-icon">🏆</div>
                <h2>Your Personal Best</h2>
                <p>Your highest score across all quizzes.</p>
                <div class="personal-best-score">
                    <span id="personal-best-score-value">0</span>%
                </div>
                <p class="personal-best-quiz-name">
                    Achieved in: <strong id="personal-best-quiz-name">N/A</strong>
                </p>
            </div>

            <!-- Competitive Exams Section -->
            <div id="competitive-section">
                <div class="section-header">
                    <h2>Start Your Preparation</h2>
                </div>
                <div class="subjects-grid">
                    <div class="subject-card" data-subject="quantitative">
                        <img src="https://cdn-icons-png.flaticon.com/512/1048/1048925.png" alt="Quantitative Aptitude Icon" class="card-icon">
                        <h2>Quantitative Aptitude</h2>
                        <p>Mathematics and numerical ability</p>
                    </div>
                    <div class="subject-card" data-subject="english">
                        <img src="https://cdn-icons-png.flaticon.com/512/201/201605.png" alt="English Icon" class="card-icon">
                        <h2>English</h2>
                        <p>Grammar, vocabulary, and comprehension</p>
                    </div>
                    <div class="subject-card" data-subject="reasoning">
                        <img src="https://cdn-icons-png.flaticon.com/512/3406/3406828.png" alt="Reasoning Icon" class="card-icon">
                        <h2>Reasoning</h2>
                        <p>Logical and analytical reasoning</p>
                    </div>
                    <div class="subject-card" data-subject="general_science">
                        <img src="https://cdn-icons-png.flaticon.com/512/2497/2497939.png" alt="General Science Icon" class="card-icon">
                        <h2>General Science</h2>
                        <p>History, Geography, Polity & more</p>
                    </div>
                    <div class="subject-card" data-subject="mock_test" id="mock-test-card">
                        <img src="https://cdn-icons-png.flaticon.com/512/3840/3840656.png" alt="Mock Test Icon" class="card-icon">
                        <h2>Daily Mock Test</h2>
                        <p class="mock-test-status">Attempt today's full-length mock test.</p>
                    </div>
                </div>
            </div>

            <!-- Academic Classes Section -->
            <div id="academic-section">
                <div class="section-header">
                    <h2>Choose Your Class</h2>
                </div>
                <div class="subjects-grid">
                    <div class="subject-card" data-class="9">
                        <img src="https://cdn-icons-png.flaticon.com/512/2232/2232688.png" alt="Class 9 Icon" class="card-icon">
                        <h2>Class 9</h2>
                        <p>Foundation level science and mathematics</p>
                    </div>
                    <div class="subject-card" data-class="10">
                        <img src="https://www.bing.com/th/id/OIP.GLmrK9nrSn8dySOsOJbYpgHaHa?w=203&h=211&c=8&rs=1&qlt=90&o=6&dpr=1.5&pid=3.1&rm=2" alt="Class 10 Icon" class="card-icon">
                        <h2>Class 10</h2>
                        <p>Board exam preparation</p>
                    </div>
                    <div class="subject-card" data-class="11">
                        <img src="https://cdn-icons-png.flaticon.com/512/2997/2997345.png" alt="Class 11 Icon" class="card-icon">
                        <h2>Class 11</h2>
                        <p>Higher secondary - Stream based</p>
                    </div>
                    <div class="subject-card" data-class="12">
                        <img src="https://cdn-icons-png.flaticon.com/512/3063/3063838.png" alt="Class 12 Icon" class="card-icon">
                        <h2>Class 12</h2>
                        <p>Board &amp; competitive exam prep</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stream Selection Page (for Class 11 & 12) -->
        <div id="stream-page" class="page">
            <button class="back-btn">← Home</button>
            <h1 id="stream-title">Choose Your Stream</h1>
            <div id="streams-grid" class="subjects-grid">
                <!-- Stream cards will be dynamically populated -->
            </div>
        </div>

        <!-- Class Subject Page -->
        <div id="class-page" class="page">
            <button class="back-btn">← Back</button>
            <h1 id="class-title">Class Subjects</h1>
            <div id="class-content">
                <!-- Subject cards will be dynamically populated -->
            </div>
        </div>

        <!-- Subject Page -->
        <div id="subject-page" class="page">
            <button class="back-btn">← Back</button>
            <h1 id="subject-title">Subject Chapters</h1>
            <div class="search-container">
                <input type="text" id="search-chapters" placeholder="Search for a chapter...">
            </div>
            <div id="chapters-grid" class="chapters-grid">
                <!-- Chapters will be populated by JavaScript -->
            </div>
        </div>

        <!-- Chapter Page -->
        <div id="chapter-page" class="page">
            <button class="back-btn">← Back to Subjects</button>
            <h1 id="chapter-title">Chapter</h1>
            
            <div class="chapter-info">
                <div class="stats">
                    <div class="stat-item">
                        <span class="stat-label">Total Questions</span>
                        <span class="stat-value" id="total-questions">100</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Completed Sets</span>
                        <span class="stat-value" id="completed-sets">0/5</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Average Score</span>
                        <span class="stat-value" id="average-score">0%</span>
                    </div>
                </div>

                <div class="sets-selection">
                    <h3>Practice Sets</h3>
                    <div id="sets-grid" class="sets-grid">
                        <!-- Sets will be populated by JavaScript -->
                    </div>
                </div>

                <div class="progress-section">
                    <h3>Progress Information</h3>
                    <div id="progress-info" class="progress-info"></div>
                </div>
            </div>
        </div>

        <!-- Quiz Page -->
        <div id="quiz-page" class="page">
            <div class="quiz-header">
                <div class="quiz-content-area">

                </div>
                <div>
                    <div id="current-question">Question 1 of 20</div>
                    <div>Set <span id="current-set">1</span></div>
                </div>
                <div class="quiz-info">
                    <div id="timer">20:00</div>
                    <!-- Time Freeze indicator (shown while timer is frozen) -->
                    <div id="freeze-indicator" style="display:none; margin-left:8px; font-size:0.9rem; color:var(--color-accent);"></div>
                </div>
            </div>

            <div class="question-container">
                <div class="question-header-flex">
                    <span id="question-year-badge" class="question-year-badge"></span>
                    <h2 id="question-text">Question will appear here</h2>
                    <button id="bookmark-btn" class="bookmark-btn" title="Bookmark this question">
                        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M19 21l-7-5-7 5V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2z"></path></svg>
                    </button>
                </div>
                <!-- Optional question image (shown only when admin provided imageUrl) -->
                <img id="question-image" class="question-image" src="" alt="" aria-hidden="true">
                <!-- Button to open the full image in a new tab / window -->
                <button id="open-question-image-btn" class="open-image-btn" style="display:none; margin-top:8px;">Open Image</button>

                <div id="options-container" class="options-container">
                    <!-- Options will be populated by JavaScript -->
                </div>
            </div>
            
            <!-- NEW: Instant Feedback for Practice Mode -->
            <div id="practice-feedback" class="practice-feedback"></div>

            <!-- NEW: Lifelines for Practice Mode -->
            <div id="lifeline-container" class="lifeline-container" style="display: none;">
                <button id="lifeline-5050" class="lifeline-btn" title="50-50: Remove two wrong options">
                    50/50
                    <span id="lifeline-5050-count" class="lifeline-count">0</span>
                </button>
                <button id="lifeline-hint" class="lifeline-btn" title="Get a hint for the question">
                    Hint
                    <span id="lifeline-hint-count" class="lifeline-count">0</span>
                </button>
                <button id="lifeline-skip" class="lifeline-btn" title="Skip this question">
                    Skip
                    <span id="lifeline-skip-count" class="lifeline-count">0</span>
                </button>
                    <!-- NEW: Time Freeze lifeline -->
                    <button id="lifeline-freeze" class="lifeline-btn" title="Time Freeze: Pause timer for 30 seconds">
                        ❄️ Freeze
                        <span id="lifeline-freeze-count" class="lifeline-count">0</span>
                    </button>
            </div>

            <div class="navigation-buttons">
                <button id="prev-btn">Previous</button>
                <button id="next-btn">Next</button>
            </div>

            <div class="question-grid">
                <h3>Questions</h3>
                <div id="question-numbers" class="question-numbers">
                    <!-- Question numbers will be populated by JavaScript -->
                </div>
            </div>
        </div>

        <!-- Results Page -->
        <div id="results-page" class="page">
            <div class="results-container">
                <!-- NEW: Confetti Container -->
                <div id="confetti-container"></div>
                <h1>Quiz Results</h1>
                
                <div class="score-display">
                    <div class="score-ring-container">
                        <svg class="score-ring" width="160" height="160">
                            <circle class="score-ring__background" stroke-width="12" r="74" cx="80" cy="80" />
                            <circle id="score-ring-circle" class="score-ring__circle" stroke-width="12" r="74" cx="80" cy="80" />
                        </svg>
                        <div class="score-circle-inner">
                            <span id="score-percentage">0%</span>
                        </div>
                    </div>
                    <div id="score-details-grid" class="score-details-grid">
                        <!-- Details will be populated by JS -->
                    </div>
                </div>

                <div id="result-status" class="result-status">
                    <!-- Result message will be populated by JavaScript -->
                </div>

                <div class="action-buttons">
                    <button>Retake Quiz</button>
                    <button id="review-answers-btn">Review Answers</button>
                    <button>Back to Chapter</button>
                </div>
            </div>
        </div>

        <!-- Review Page -->
        <div id="review-page" class="page">
            <button id="review-page-back-btn" class="back-btn">← Back</button>
            <h1 id="review-page-title">Review Answers</h1>
            <div id="review-container" class="review-container">
                <!-- Review content will be populated by JavaScript -->
            </div>
        </div>

        <!-- Bookmarks Page -->
        <div id="bookmarks-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>Bookmarked Questions</h1>
            <div id="bookmarks-container" class="review-container">
                <!-- Bookmarked questions will be populated by JavaScript -->
            </div>
        </div>

        <!-- Community Page -->
        <div id="community-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>Community Updates</h1>
            <div id="community-posts-container" class="community-posts-container">
                <!-- Community posts will be populated by JavaScript -->
            </div>
        </div>

        <!-- Leaderboard Page -->
        <div id="leaderboard-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>Leaderboard</h1>
            <p>Top 10 scores across all quizzes.</p>
            <div id="leaderboard-container" class="leaderboard-container">
                <div id="leaderboard-spinner" class="spinner-container" style="display: none;">
                    <div class="spinner"></div>
                </div>
                <ul id="leaderboard-list">
                    <!-- Leaderboard will be populated by JavaScript -->
                </ul>
            </div>
            <!-- NEW: User's Personal Rank Display -->
            <div id="user-rank-container" class="user-rank-container" style="display: none;">
                <h3>Your Rank</h3>
                <div id="user-rank-details">
                    <!-- User's rank will be populated by JavaScript -->
                </div>
                <!-- NEW: Avatar display on leaderboard -->
                <div class="leaderboard-avatar-note">
                    <p>Avatars can be purchased and changed from the Store and Settings page.</p>
                </div>
            </div>
        </div>

        <!-- NEW: Achievements Page -->
        <div id="achievements-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>Your Achievements</h1>
            <p>Unlock badges by completing quizzes and reaching milestones!</p>
            <div id="achievements-grid" class="achievements-grid">
                <!-- Achievements will be populated by JavaScript -->
            </div>
        </div>

        <!-- NEW: Store Page (Placeholder) -->
        <div id="store-page" class="page store-page-redesigned">
            <button class="back-btn">← Back to Home</button>

            <div class="store-header">
                <div class="store-header-content">
                    <h1>Quizify Store</h1>
                    <p>Use your coins to unlock new themes, avatars, and helpful items!</p>
                </div>
                <div class="store-coin-balance-wrapper">
                    <div class="store-coin-balance">
                        <span>Your Balance</span>
                        <strong id="store-coin-balance-display">0</strong>
                        <span class="coin-icon">💰</span>
                    </div>
                </div>
            </div>

            <div class="store-layout">
                <!-- NEW: Store Tab Navigation -->
                <div class="store-tabs">
                    <button class="store-tab-btn active" data-tab="daily-deals-tab">✨ Deals</button>
                    <button class="store-tab-btn" data-tab="avatars-tab">🧑‍🎓 Avatars</button>
                    <button class="store-tab-btn" data-tab="themes-tab">🎨 Themes</button>
                    <button class="store-tab-btn" data-tab="lifelines-tab">🎭 Lifelines</button>
                    <button class="store-tab-btn" data-tab="utilities-tab">🔑 Utilities</button>
                </div>
    
                <!-- NEW: Store Tab Content -->
                <div class="store-tab-content-wrapper">
                    <div class="store-tab-content active" id="daily-deals-tab">
                        <div class="daily-deals-section">
                            <div class="daily-deals-header">
                                <h3>✨ Daily Deals</h3>
                                <div id="daily-deals-timer-container" class="daily-deals-timer-wrapper">
                                    <span>Deals refresh in:</span>
                                    <strong id="daily-deals-timer">00:00:00</strong>
                                </div>
                            </div>
                            <!-- NEW: Featured Item Section (Moved inside deals tab) -->
                            <div id="featured-item-section" class="featured-item-section" style="display: none;">
                                <!-- Featured item will be populated here by JS -->
                            </div>
        
                            <div class="store-items-scroll">
                                <div id="daily-deals-grid" class="store-item-grid">
                                    <!-- Daily deal items will be populated here -->
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div class="store-tab-content" id="avatars-tab"></div>
                    <div class="store-tab-content" id="themes-tab"></div>
                    <div class="store-tab-content" id="lifelines-tab"></div>
                    <div class="store-tab-content" id="utilities-tab"></div>
                </div>
            </div>
        </div>

        <!-- NEW: Mock Test Rules Modal -->
        <div id="mock-test-rules-modal" class="modal-overlay">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>Mock Test Rules & Instructions</h2>
                    <button id="close-rules-modal-btn" class="modal-close-btn" title="Close">&times;</button>
                </div>
                <div class="modal-body">
                    <ul>
                        <li>The test consists of <strong>100 questions</strong> across 4 sections.</li>
                        <li>Total duration is <strong>60 minutes</strong>.</li>
                        <li>Each correct answer awards <strong>2 marks</strong>.</li>
                        <li>Each incorrect answer has a penalty of <strong>-0.5 marks</strong>.</li>
                        <li>Unanswered questions will not be marked.</li>
                        <li>You can switch between sections at any time.</li>
                        <li>The test will be automatically submitted when the time is up.</li>
                    </ul>
                    <p><strong>Are you ready to begin?</strong></p>
                </div>
                <div class="modal-actions">
                    <button id="start-mock-test-btn" class="btn btn--primary">Start Mock Test</button>
                </div>
            </div>
        </div>

        <!-- NEW: Mock Test Page -->
        <div id="mock-test-page" class="page">
            <div class="quiz-header">
                <div class="quiz-content-area">
                    <h2>Mock Test</h2>
                </div>
                <div class="quiz-info">
                    <div id="mock-timer">60:00</div>
                </div>
            </div>

            <div class="mock-test-layout">
                <div class="mock-test-main">
                    <div id="mock-section-tabs" class="mock-section-tabs">
                        <button class="mock-section-tab active" data-section="quantitative">Quantitative Aptitude</button>
                        <button class="mock-section-tab" data-section="english">English</button>
                        <button class="mock-section-tab" data-section="reasoning">Reasoning</button>
                        <button class="mock-section-tab" data-section="general_science">General Science</button>
                    </div>
                    <div class="question-container">
                        <div class="question-header-flex">
                            <h3 id="mock-question-number">Question 1</h3>
                        </div>
                        <p id="mock-question-text">Question will appear here.</p>
                        <div id="mock-options-container" class="options-container"></div>
                    </div>
                    <div class="navigation-buttons">
                        <button id="mock-prev-btn">Previous</button>
                        <button id="mock-next-btn">Next</button>
                        <button id="mock-submit-btn" class="btn--danger">Submit Test</button>
                    </div>
                </div>
                <div class="mock-test-sidebar">
                    <h4>Question Palette</h4>
                    <div id="mock-question-numbers" class="question-numbers"></div>
                    <div class="palette-legend">
                        <div><span class="q-legend current"></span> Current</div>
                        <div><span class="q-legend answered"></span> Answered</div>
                        <div><span class="q-legend not-answered"></span> Not Answered</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: Mock Test Results Page -->
        <div id="mock-test-results-page" class="page">
            <div class="results-container">
                <h1>Mock Test Results</h1>
                <div class="score-ring-container">
                    <svg class="score-ring" width="160" height="160">
                        <circle class="score-ring__background" stroke-width="12" r="74" cx="80" cy="80"></circle>
                        <circle id="mock-score-ring-circle" class="score-ring__circle" stroke-width="12" r="74" cx="80" cy="80"></circle>
                    </svg>
                    <div class="score-circle-inner">
                        <span id="mock-total-score">0.00</span> / <span id="mock-total-marks">200</span>
                    </div>
                </div>
                <div id="mock-score-details-grid" class="score-details-grid">
                    <div class="score-detail-item"><strong id="mock-total-questions-summary">100</strong><span>Questions</span></div>
                    <div class="score-detail-item correct"><strong id="mock-correct-answers">0</strong><span>Correct</span></div>
                    <div class="score-detail-item incorrect"><strong id="mock-incorrect-answers">0</strong><span>Incorrect</span></div>
                    <div class="score-detail-item"><strong id="mock-unanswered">0</strong><span>Unanswered</span></div>
                    <div class="score-detail-item time"><strong id="mock-time-taken">0m 0s</strong><span>Time Taken</span></div>
                </div>
                <div id="mock-section-wise-results" class="section-results-container">
                    <!-- Section-wise results will be populated here -->
                </div>
                <button id="mock-results-home-btn" class="btn btn--primary">Back to Home</button>
            </div>
        </div>


        <!-- NEW: Profile Page -->
        <div id="profile-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>My Profile & Stats</h1>
            <!-- NEW: Avatar display on profile -->
            <div id="profile-avatar-display" class="profile-avatar-display">
                👤
            </div>
            <div class="profile-grid">
                <div class="profile-card">
                    <h2 id="profile-user-name"></h2>
                    <p>Focus: <strong id="profile-user-focus"></strong></p>
                </div>
                <div class="stats-grid">
                    <div class="stat-item">
                        <span class="stat-label">Total Quizzes Taken</span>
                        <span class="stat-value" id="profile-quizzes-taken">0</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Overall Average Score</span>
                        <span class="stat-value" id="profile-average-score">0%</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-label">Quizzes Passed</span>
                        <span class="stat-value" id="profile-quizzes-passed">0</span>
                    </div>
                </div>
            </div>

            <!-- NEW: Apply vertical layout to profile page as well -->
            <div class="settings-layout">
                <!-- NEW: Profile Page Tabs -->
                <div class="profile-tabs" id="profile-tabs-container">
                    <button class="profile-tab-btn active" data-tab="profile-stats-tab">📊 Stats</button>
                    <button class="profile-tab-btn" data-tab="profile-analysis-tab">🔬 Analysis</button>
                    <button class="profile-tab-btn" data-tab="profile-history-tab">📜 History</button>
                    <!-- NEW: Friends Tab Button -->
                    <button class="profile-tab-btn" data-tab="profile-friends-tab">🧑‍🤝‍🧑 Friends</button>
                </div>
    
                <!-- NEW: Profile Page Tab Content -->
                <div class="settings-content-wrapper">
                    <div class="profile-tab-content active" id="profile-stats-tab">
                        <div id="profile-chart-container">
                            <canvas id="performanceChart"></canvas>
                            <div id="mobile-performance-list" class="mobile-performance-list"></div>
                        </div>
                    </div>
        
                    <div class="profile-tab-content" id="profile-analysis-tab">
                        <div id="topic-strength-analysis" class="topic-strength-section">
                            <h2>Topic Strength Analysis</h2>
                            <p class="section-description">Based on your average scores in completed quiz sets.</p>
                            <div class="strength-grid">
                                <div class="strength-column">
                                    <h3><span class="strength-icon">💪</span>Strengths</h3>
                                    <ul id="strength-topics-list"></ul>
                                </div>
                                <div class="strength-column">
                                    <h3><span class="strength-icon">🧠</span>Areas to Improve</h3>
                                    <ul id="improvement-topics-list"></ul>
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div class="profile-tab-content" id="profile-history-tab">
                        <div class="profile-section" id="profile-history">
                            <h2>Quiz History</h2>
                            <p class="section-description">Review your past quiz attempts and track your performance over time.</p>
                            <div class="history-filter-container">
                                <div class="filter-group">
                                    <label for="history-subject-filter">Filter by Subject:</label>
                                    <select id="history-subject-filter" class="form-control"></select>
                                </div>
                                <div class="filter-group">
                                    <label for="history-chapter-filter">Filter by Chapter:</label>
                                    <select id="history-chapter-filter" class="form-control" disabled></select>
                                </div>
                                <div class="filter-group">
                                    <label for="history-status-filter">Filter by Status:</label>
                                    <select id="history-status-filter" class="form-control"></select>
                                </div>
                            </div>
                        </div>
                        <div id="history-list-container" class="history-list-container">
                            <!-- History items will be populated here by JS -->
                        </div>
                    </div>

                    <!-- NEW: Friends Tab Content -->
                    <div class="profile-tab-content" id="profile-friends-tab">
                        <div class="friends-sub-section" id="friend-requests-section">
                            <h3>Friend Requests</h3>
                            <div id="friend-requests-container" class="friends-list-container">
                                <!-- Pending friend requests will be populated here -->
                            </div>
                        </div>
                        <div class="friends-sub-section" id="add-friend-section">
                            <h3>Add Friends</h3>
                            <div class="friend-search-container">
                                <input type="text" id="add-friend-search-input" class="form-control" placeholder="Search for users by name...">
                                <div id="friend-search-results" class="friend-search-results"></div>
                            </div>
                        </div>
                        <div class="friends-sub-section" id="friends-list-section">
                            <h3>My Friends</h3>
                            <div id="friends-list-container" class="friends-list-container">
                                <!-- Friends list will be populated here -->
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: About Us Page -->
        <div id="about-us-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <div class="about-us-header">
                <h1>About Quizify</h1>
                <p>Your partner in learning and growth.</p>
            </div>

            <div class="about-section fade-in-section">
                <h2>Our Story</h2>
                <p>Quizify was born from a simple idea: learning should be exciting, not intimidating. As a student preparing for competitive exams, our founder, Raj Mishra, realized that traditional study methods were often monotonous and ineffective. He envisioned a platform that could transform learning into an interactive and enjoyable experience. Starting as a passion project, Quizify grew into a comprehensive tool designed to empower students with the knowledge and confidence they need to excel. Our journey is fueled by a commitment to innovation and a deep-seated belief in the power of accessible education for all.</p>
            </div>

            <div class="about-section fade-in-section">
                <h2>Meet the Creator</h2>
                <div class="team-grid">
                    <div class="team-member-card">
                        <img src="profile/profile.webp" alt="Raj Mishra" class="team-member-avatar">
                        <h3>Raj Mishra</h3>
                        <p class="team-member-role">Founder & Lead Developer</p>
                        <p class="team-member-bio">A passionate software engineer with a vision to revolutionize ed-tech. Raj is the architect behind Quizify, dedicated to building intuitive and powerful learning tools.</p>
                    </div>
                </div>
            </div>

            <div class="about-section">
                <h2>Our Mission</h2>
                <p>Our mission is to make quality education accessible, engaging, and effective for everyone. We believe in the power of knowledge and strive to create a platform that not only helps students prepare for exams but also fosters a lifelong love for learning. By leveraging technology, we aim to break down barriers to education, empower learners with the tools they need to succeed, and build a global community of curious minds.</p>
            </div>

            <div class="about-section fade-in-section">
                <h2>Our Values</h2>
                <div class="values-grid">
                    <div class="value-card"><h4>Excellence</h4><p>We are committed to delivering a high-quality, reliable, and top-notch learning experience.</p></div>
                    <div class="value-card"><h4>Accessibility</h4><p>We believe that learning should be available to everyone, regardless of their background or location.</p></div>
                    <div class="value-card"><h4>Innovation</h4><p>We continuously innovate to bring the best and most effective learning tools to our users.</p></div>
                    <div class="value-card"><h4>User-Centric</h4><p>Our users are at the heart of everything we do. We listen, learn, and build to meet their needs.</p></div>
                    <div class="value-card"><h4>Integrity</h4><p>We operate with honesty and transparency, ensuring a trustworthy platform for all our users.</p></div>
                    <div class="value-card"><h4>Community</h4><p>We foster a supportive community where learners can grow together and share their knowledge.</p></div>
                </div>
            </div>

            <div class="about-section vision-section fade-in-section">
                <h2>Our Vision</h2>
                <p>We envision a world where learning is not a chore but an adventure. Our goal is to be the leading platform for interactive education, where curiosity is sparked, knowledge is retained, and every user is empowered to achieve their full potential.</p>
            </div>
        </div>

        <!-- NEW: Settings Page -->
        <div id="settings-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>Settings</h1>
            <p class="page-description">Manage your account details, customize the app's appearance, and adjust quiz settings.</p>

            <!-- NEW: Vertical Settings Layout -->
            <div class="settings-layout">
                <!-- NEW: Settings Tabs (reusing profile-tabs styling) -->
                <div class="profile-tabs" id="settings-tabs-container">
                    <button class="profile-tab-btn active" data-tab="settings-account-tab">Account</button>
                    <button class="profile-tab-btn" data-tab="settings-customization-tab">Customization</button>
                    <button class="profile-tab-btn" data-tab="settings-general-tab">General</button>
                    <button class="profile-tab-btn" data-tab="settings-danger-tab">Danger Zone</button>
                </div>
    
                <!-- NEW: Tab Content Panes -->
                <div class="settings-content-wrapper">
                    <div class="profile-tab-content active" id="settings-account-tab">
                        <div class="setting-section" id="settings-account">
                            <div class="setting-card">
                                <div class="setting-card-header with-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
                                    <h3>Account Management</h3>
                                    <button id="edit-account-btn" class="btn btn--icon" title="Edit Account Details">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"></path><path d="M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"></path></svg>
                                    </button>
                                </div>
                                <div class="setting-item">
                                    <label for="account-name-input" class="setting-label">Your Name</label>
                                    <input type="text" id="account-name-input" class="form-control" disabled>
                                </div>
                                <div class="setting-item">
                                    <label for="account-pin-input" class="setting-label">Your 4-Digit PIN</label>
                                    <input type="number" id="account-pin-input" class="form-control" maxlength="4" oninput="this.value=this.value.slice(0,4)" disabled>
                                </div>
                                <div class="setting-actions">
                                    <button id="save-account-btn" class="btn btn--primary btn--full-width">Save Account Changes</button>
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div class="profile-tab-content" id="settings-customization-tab">
                        <div class="setting-section" id="settings-customization">
                            <div class="setting-card">
                                <div class="setting-card-header with-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M12 2.69l5.66 5.66a8 8 0 1 1-11.31 0L12 2.69z"></path></svg>
                                    <h3>Appearance</h3>
                                </div>
                                <div class="setting-item">
                                    <label class="setting-label">Select Your Avatar</label>
                                    <p class="setting-description">Choose from your purchased avatars. Buy more in the Store!</p>
                                    <div id="avatar-selection-grid" class="selection-grid"></div>
                                    <div class="setting-actions" id="avatar-actions" style="display: none; margin-top: 16px;">
                                        <button id="apply-avatar-btn" class="btn btn--primary btn--full-width">Apply Selection</button>
                                    </div>
                                </div>
                                <div class="setting-item">
                                    <label class="setting-label">Select Your Theme</label>
                                    <p class="setting-description">Choose from your purchased themes. Buy more in the Store!</p>
                                    <div id="theme-selection-grid" class="selection-grid"></div>
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div class="profile-tab-content" id="settings-general-tab">
                        <div class="setting-section" id="settings-general">
                            <div class="setting-card">
                                <div class="setting-card-header with-icon">
                                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
                                    <h3>Quiz Settings</h3>
                                </div>
                                <div class="setting-item">
                                    <label for="timer-duration-input" class="setting-label">Quiz Timer Duration</label>
                                    <p class="setting-description">Time per question in seconds (10-180).</p>
                                    <input type="number" id="timer-duration-input" class="form-control" min="10" max="180" step="5">
                                </div>
                                <div class="setting-actions">
                                    <button id="save-quiz-settings-btn" class="btn btn--primary btn--full-width">Save Quiz Settings</button>
                                </div>
                            </div>
                        </div>
                    </div>
        
                    <div class="profile-tab-content" id="settings-danger-tab">
                        <div class="setting-section" id="settings-danger">
                            <div class="setting-card danger-zone">
                                <div class="danger-zone-item">
                                    <div>
                                        <strong>Delete Account</strong>
                                        <p class="setting-description">Permanently delete your account and all data. This cannot be undone.</p>
                                    </div>
                                    <button id="delete-account-btn" class="btn btn--danger">Delete Account</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- NEW: Videos Page -->
        <div id="videos-page" class="page">
            <button class="back-btn">← Back to Home</button>
            <h1>Video Lectures</h1>
            <p class="page-description">Browse our collection of video lectures to enhance your learning.</p>
            <div class="video-page-content">
                <input type="text" id="video-search-input" class="form-control video-search-bar" placeholder="Search for videos by title or topic...">
                
                <!-- MOVED: Latest Videos Section -->
                <div id="latest-videos-section">
                    <div class="section-header">
                        <h2>✨ Latest Uploads</h2>
                    </div>
                    <div id="latest-videos-container" class="video-row"></div>
                </div>

                <!-- NEW: Video Category Tabs -->
                <div class="profile-tabs" id="video-category-tabs">
                    <button class="profile-tab-btn active" data-category="competitive">Competitive</button>
                    <button class="profile-tab-btn" data-category="class_12">Class 12</button>
                    <button class="profile-tab-btn" data-category="class_11">Class 11</button>
                    <button class="profile-tab-btn" data-category="class_10">Class 10</button>
                    <button class="profile-tab-btn" data-category="class_9">Class 9</button>
                    <button class="profile-tab-btn" data-category="general">General</button>
                </div>
                <div id="video-list-container" class="profile-tab-content active"></div>
            </div>
        </div>

        <!-- NEW: Video Player Modal -->
        <div id="video-player-modal" class="modal-overlay video-player-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2 id="video-player-title"></h2>
                    <button id="close-video-player-btn" class="modal-close-btn" title="Close">&times;</button>
                </div>
                <div class="modal-body">
                    <div id="video-player-container" class="video-player-container">
                        <!-- YouTube Iframe or Video Element will be inserted here -->
                    </div>
                    <p id="video-player-description" class="video-player-description"></p>
                </div>
            </div>
        </div>

        <!-- NEW: Image Viewer Modal -->
        <div id="image-viewer-modal" class="modal-overlay image-viewer-modal">
            <div class="modal-content modal-content--narrow">
                <div class="modal-header">
                    <h2 id="image-viewer-title">Image</h2>
                    <button id="close-image-viewer-btn" class="modal-close-btn" title="Close">&times;</button>
                </div>
                <div class="modal-body" style="text-align:center;">
                    <img id="image-viewer-img" src="" alt="" style="max-width:100%; height:auto; border-radius:4px;" />
                </div>
            </div>
        </div>


    </div>
    

    <!-- Load data files -->
    <script src="classes.js"></script>
    <script src="quantitative.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- NEW: Chart.js library -->
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>

    <script src="english.js"></script>
    <script src="reasoning.js"></script>
    <script src="generalscience.js"></script>

    <script src="friends.js"></script> <!-- NEW: Include the friends script -->
    <script src="videos.js"></script> <!-- NEW: Include the videos script -->
    <script src="store.js"></script> <!-- NEW: Include the store script -->
    <script src="chat.js"></script>
    <script src="bot.js"></script>
    <script src="mock-test.js"></script>
    <!-- Main application script --> 
    <script src="app.js"></script>

  <!-- Footer Section -->
  <footer>
    <div class="footer-content">
        <div>
            <p>Made with love by Raj Mishra! - <span id="app-version"></span></p>
            <p>&copy; 2025 Quizify. All rights reserved.</p>
        </div>
    </div>
  </footer>

</body>

</html>
